<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
    <title>index</title>
  </head>
  <body>
    <h1>Hello, World!</h1>
    <div>
      <textarea
        id="memoTitle"
        class="title"
        maxlength="100"
        placeholder="title"
      ></textarea>
      <textarea
        id="memoContents"
        class="content"
        maxlength="1000"
        placeholder="memo"
      ></textarea>
      <button type="button" onclick="saveMemo()">Save</button>
    </div>
  </body>
  <script>
    let key = 1;

    window.onload = function () {
      localStorage.clear();
    };

    const clearText = () => {
      document.getElementById("memoTitle").value = "";
      document.getElementById("memoContents").value = "";
    };

    function saveMemo() {
      const memo = {
        title: document.getElementById("memoTitle").value,
        contents: document.getElementById("memoContents").value,
      };
      const jsonString = JSON.stringify(memo);
      localStorage.setItem(key, jsonString);
      readMemo();
      key++;
      clearText();
    }

    function readMemo() {
      const memo = JSON.parse(localStorage.getItem(`${key}`));

      console.log("title: %s contents: %s", memo.title, memo.contents);
    }
  </script>
</html>
